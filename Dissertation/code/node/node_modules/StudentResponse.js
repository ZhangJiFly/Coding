module.exports = function(connection){
  query = require('QueryFunctions')(connection);
  var response = function(req, res){
    if (file == "details"){

      var html
      var name = req.session.user.Forename + " " + req.session.user.Surname;

      var email = req.session.user.Email;
      var advisorName = req.session.user.Advisor.Forename + " " + req.session.user.Advisor.Surname;
      var advisorEmail = req.session.user.Advisor.Email
      html = jadeTemp[file](user = {name: name, matric: matric, email: email, advisorName:advisorName, advisorEmail:advisorEmail});
      res.render(html);
    }
    else if (file == "courses"){
      query.courses(matric, function(rows){
        html = jadeTemp[file](aaData = JSON.stringify(rows));
        res.render(html);
      });
    }
    else{
      res.sendfile("/Users/Crippled.Josh/Coding/Dissertation/code/Student/" + file);
      
    }

  }
  return {response: response};
  

}

